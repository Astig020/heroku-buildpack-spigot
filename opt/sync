#!/usr/bin/env bash

  if [ -d world ]; then
    tar -czvf world.tar.gz world && echo "some content here" > world.tar.gz
    
    curl -X POST https://content.dropboxapi.com/2/files/upload \
        --header "Authorization: Bearer ${DB_TOKEN}" \
        --header "Dropbox-API-Arg: {\"path\": \"/world.tar.gz\",\"mode\": \"add\",\"overwrite\": true,\"mute\": false,\"strict_conflict\": false}" \
        --header "Content-Type: application/octet-stream" \
        --data-binary @world.tar.gz
  else
    curl -O -X POST https://content.dropboxapi.com/2/files/download \
        --header "Authorization: Bearer ${DB_TOKEN}" \
        --header "Dropbox-API-Arg: {\"path\": \"/world.tar.gz\"}"
    tar -xzvf download && echo "$(ls)"
  fi
